# Declare the built-in repo rule from Bazel
http_archive = use_repo_rule(
    "@bazel_tools//tools/build_defs/repo:http.bzl",
    "http_archive"
)

# Download + extract the msgstd tarball
http_archive(
    name = "msgstd_tarball",
    urls = ["https://artifactory.company.com/path/to/fxh_msgstds_123.tar"],
    auth_patterns = {
        "artifactory.company.com": "Bearer <password>",
    },
    # Optional on first run â€” Bazel will fail and tell you the correct hash
    # sha256 = "your-sha256-here",
)



filegroup(
    name = "msgstd_resources",
    srcs = glob(
        [
            "@msgstd_tarball//:*.esql",
            "@msgstd_tarball//:*.subflow",
        ],
        exclude = ["@msgstd_tarball//:*.msgflow"],
    ),
    visibility = ["//message_node:__pkg__"],
)


bazel build //message_node:msgstd_resources
