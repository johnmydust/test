module(name = "msgstd_project", version = "1.0")

bazel_dep(name = "bazel_tools", version = "6.3.0")  # Built-in rules (required)

use_extension("@bazel_tools//tools/build_defs/repo:http.bzl", "http_file")

http_file(
    name = "msgstd_tarball",
    url = "https://artifactory.company.com/path/to/fxh_msgstds_123.tar",
    # Optionally omit this the first time to get an error showing the correct checksum:
    # sha256 = "your-sha256-here"
)

use_repo(http_file, "msgstd_tarball")

load("//msgstd:extract_tar.bzl", "extract_tar")

extract_tar(
    name = "unpack_msgstd_tar",
    tar = "@msgstd_tarball//file",
    visibility = ["//msgstd:__pkg__"],  # ðŸ‘ˆ Only visible inside msgstd/
)

bazel build //msgstd:unpack_msgstd_tar
